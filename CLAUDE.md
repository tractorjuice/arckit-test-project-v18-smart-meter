# CLAUDE.md

## Project Overview

This is an ArcKit-governed architecture project for a **UK Smart Meter Data Consumer Mobile App** that provides citizens with access to their smart meter energy consumption data via a mobile application.

### Domain Context

The **Smart Metering Implementation Programme (SMIP)**, led by the **Department for Energy Security & Net Zero (DESNZ)**, has deployed over 34 million smart meters across Great Britain. The **Data Communications Company (DCC)** operates the smart metering communications infrastructure, enabling energy suppliers, network operators, and authorised third parties to access meter data.

The **Smart Energy Code (SEC)** and **Ofgem's data access framework** govern how consumers can share their smart meter data with third parties. This project designs a mobile app that empowers consumers to access, visualise, and act on their half-hourly energy consumption data.

### Service Scope

- Authenticate consumers and link to their smart meter(s) via energy supplier APIs or DCC
- Retrieve half-hourly gas and electricity consumption data from smart meters (SMETS1 and SMETS2)
- Display real-time and historical energy usage with intuitive visualisations
- Provide personalised energy-saving recommendations based on consumption patterns
- Enable tariff comparison using actual consumption data
- Send alerts for unusual consumption, budget thresholds, and prepayment top-up reminders
- Support In-Home Display (IHD) data synchronisation
- Publish aggregated and anonymised data for energy research (with consent)

### Key Stakeholders

- **Department for Energy Security & Net Zero (DESNZ)** - Smart metering policy owner
- **Ofgem** - Energy regulator, data access and consumer protection
- **Data Communications Company (DCC)** - Smart meter communications infrastructure
- **Energy Suppliers** (e.g., British Gas, EDF, Octopus Energy) - Data providers and consumer relationships
- **Citizens / Energy Consumers** - End users of the mobile app
- **Smart Energy GB** - Consumer engagement and awareness
- **GDS** - Service Standard compliance (if government-delivered)
- **CDDO** - Technology Code of Practice compliance
- **ICO** - Data protection oversight

### Regulatory & Compliance Requirements

- Smart Energy Code (SEC) - Data access and security requirements
- Ofgem Supplier Licence Conditions - Consumer data access rights
- UK GDPR / Data Protection Act 2018 - Personal energy consumption data
- Privacy and Electronic Communications Regulations (PECR)
- GDS Service Standard (14 points)
- Technology Code of Practice (13 points)
- NCSC Cyber Assessment Framework / Secure by Design
- HM Treasury Green Book (for business case)
- HM Treasury Orange Book (for risk management)
- Accessibility Regulations (Public Sector Bodies) 2018
- WCAG 2.2 AA - Mobile accessibility standards

## ArcKit Commands

Use these slash commands to generate architecture artifacts:

```
/arckit.principles    -> Establish architecture governance principles
/arckit.stakeholders  -> Analyze stakeholder drivers and goals
/arckit.requirements  -> Define business, functional, and non-functional requirements
/arckit.risk          -> Create risk register (Orange Book)
/arckit.sobc          -> Strategic Outline Business Case (Green Book)
/arckit.data-model    -> Data model for smart meter and consumer entities
/arckit.research      -> Research mobile frameworks, smart meter APIs, cloud services
/arckit.diagram       -> Architecture diagrams (C4, data flow, mobile architecture)
/arckit.wardley       -> Wardley Maps for build vs buy decisions
/arckit.dpia          -> Data Protection Impact Assessment (energy consumption is personal data)
/arckit.tcop          -> Technology Code of Practice assessment
/arckit.service-assessment -> GDS Service Standard readiness
/arckit.secure        -> Secure by Design assessment
```

## Project Structure

All artifacts are stored in `projects/` with document IDs generated by `.arckit/scripts/bash/generate-document-id.sh`.

```
projects/
├── 000-global/                    -> Cross-project principles
│   └── ARC-000-PRIN-v1.0.md
└── 001-smart-meter-app/           -> Service artifacts
    ├── ARC-001-STKE-v1.0.md       -> Stakeholder analysis
    ├── ARC-001-REQ-v1.0.md        -> Requirements
    ├── ARC-001-RISK-v1.0.md       -> Risk register
    ├── ARC-001-SOBC-v1.0.md       -> Business case
    ├── ARC-001-DATA-v1.0.md       -> Data model
    ├── ARC-001-ADR-001-v1.0.md    -> Architecture decisions
    ├── ARC-001-DIAG-001-v1.0.md   -> Architecture diagrams
    └── vendors/                    -> Vendor evaluations
```

## Technical Context

When generating artifacts for this project, consider:

- **Data Source**: DCC smart metering infrastructure, energy supplier APIs (Octopus Energy API, n3rgy Consumer Access API)
- **Meter Types**: SMETS1 (legacy, via supplier) and SMETS2 (via DCC) smart meters
- **Data Granularity**: Half-hourly consumption readings for gas and electricity
- **Platform**: Cross-platform mobile app (iOS and Android)
- **Hosting**: UK Government cloud or commercial cloud (AWS UK / Azure UK regions)
- **Users**: ~34 million smart meter households, energy consumers
- **Integration**: DCC, energy supplier APIs, In-Home Displays, Open Banking (for billing)
- **Security Classification**: OFFICIAL (energy consumption data is personal data under UK GDPR)
- **Accessibility**: WCAG 2.2 AA, must support screen readers and assistive technology on mobile
